<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Page Title</title>
</head>
<body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div class="results"></div>
    <script>
        // Your JavaScript goes here!
        let playerScore = 0;
        let computerScore = 0;
        let roundCounter = 1;
        const container = document.querySelector('.results')
        const scoreboard = document.createElement('div');
        h1Final = document.createElement('h1')
        const rockCallback = () => {
            if (h1Final.textContent === "Victory!" || h1Final.textContent === "Defeat!") {
                rock.removeEventListener('click', rockCallback)
                return
            }
            const divRock = document.createElement('div')
            divRock.textContent = `Round ${roundCounter} : ${playRound('rock')}`
            container.appendChild(divRock)
            if (divRock.textContent.includes('You win')) {
                playerScore ++;
            } else if (divRock.textContent.includes('You lose')) {
                computerScore ++
            }
            scoreboard.textContent = `Player: ${playerScore} Machine: ${computerScore}`;
            roundCounter ++;
            if (playerScore >= 5) {
                rock.removeEventListener('click', rockCallback)
                h1Final.textContent = 'Victory!'
                container.appendChild(h1Final)
            } else if (computerScore >= 5) {
                rock.removeEventListener('click', rockCallback)
                h1Final.textContent = 'Defeat!'
                container.appendChild(h1Final)
            }
        }
        const paperCallback = () => {
            if (h1Final.textContent === "Victory!" || h1Final.textContent === "Defeat!") {
                paper.removeEventListener('click', rockCallback)
                return
            }
            const divPaper = document.createElement('div')
            divPaper.textContent = `Round ${roundCounter} : ${playRound('paper')}`
            container.appendChild(divPaper)
            if (divPaper.textContent.includes('You win')) {
                playerScore ++;
            } else if (divPaper.textContent.includes('You lose')) {
                computerScore ++
            }
            scoreboard.textContent = `Player: ${playerScore} Machine: ${computerScore}`;
            roundCounter ++;
            if (playerScore >= 5) {
                paper.removeEventListener('click', paperCallback)
                h1Final.textContent = 'Victory!'
                container.appendChild(h1Final)
            } else if (computerScore >= 5) {
                paper.removeEventListener('click', paperCallback)
                h1Final.textContent = 'Defeat!'
                container.appendChild(h1Final)
            }
            
        }
        const scissorsCallback = () => {
            if (h1Final.textContent === "Victory!" || h1Final.textContent === "Defeat!") {
                scissors.removeEventListener('click', rockCallback)
                return
            }
            const divScissors = document.createElement('div')
            divScissors.textContent = `Round ${roundCounter} : ${playRound('scissors')}`
            container.appendChild(divScissors)
            if (divScissors.textContent.includes('You win')) {
                playerScore ++;
            } else if (divScissors.textContent.includes('You lose')) {
                computerScore ++
            }
            scoreboard.textContent = `Player: ${playerScore} Machine: ${computerScore}`;
            roundCounter ++;
            if (playerScore >= 5) {
                scissors.removeEventListener('click', scissorsCallback)
                h1Final.textContent = 'Victory!'
                container.appendChild(h1Final)
            } else if (computerScore >= 5) {
                scissors.removeEventListener('click', scissorsCallback)
                h1Final.textContent = 'Defeat!'
                container.appendChild(h1Final)
            }

        }
        function documentResults () {
            
            scoreboard.textContent = `Player: ${playerScore} Machine: ${computerScore}`;
            container.appendChild(scoreboard)
            const rock = document.querySelector('#rock')
            rock.addEventListener('click',rockCallback);
            const paper = document.querySelector('#paper')
            paper.addEventListener('click',paperCallback);
            const scissors = document.querySelector('#scissors')
            scissors.addEventListener('click', scissorsCallback);

        }
        
        function playRound(pchoice) {
            const computerChoices = ['rock', 'paper', 'scissors'];
            const randomIndex = Math.floor(Math.random() * computerChoices.length);
            const cchoice = computerChoices[randomIndex];
            if (pchoice === cchoice) {
                return `Computer chooses ${cchoice}.`+
                ` It's a draw!`
            }
            if (pchoice === "rock" && cchoice == "paper") {
                return `Computer chooses ${cchoice}.`+
                ` You lose!`
            } else if (pchoice === "scissors" && cchoice == "rock") {
                return `Computer chooses ${cchoice}.` +
                ` You lose!`
            } else if (pchoice === "paper" && cchoice == "scissors") {
                return `Computer chooses ${cchoice}.` +
                ` You lose!`
            } else {
                return `Computer chooses ${cchoice}.` +
                `You win!`
            } 
        }

        documentResults()
    </script>
</body>
</html>